<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>المنتجات - السوق العالمي</title>
  <style>
    body{font-family:Arial;margin:0;background:#f5f7fb}
    header{background:#0066cc;color:#fff;padding:14px;text-align:center}
    .search{display:flex;gap:8px;width:90%;max-width:1000px;margin:16px auto}
    .search input{flex:1;padding:10px;border-radius:8px;border:1px solid #ccc}
    .search button{padding:10px 16px;border-radius:8px;border:none;background:#0066cc;color:#fff}
    .cats{display:flex;gap:10px;overflow:auto;padding:10px 6%;width:88%}
    .cat{background:#fff;padding:8px 14px;border-radius:20px;border:1px solid #e3e7ee;white-space:nowrap}
    .list{width:90%;max-width:1100px;margin:10px auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .item{background:#fff;padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.04)}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:#007bff;color:#fff;text-decoration:none}
  </style>
</head>
<body>
<header>المنتجات</header>

<div class="search">
  <input id="q" placeholder="ابحث عن منتج أو كلمة..." />
  <button onclick="doSearch()">بحث</button>
</div>

<div class="cats" id="cats">
  <div class="cat" onclick="filter('all')">الكل</div>
  <div class="cat" onclick="filter('electronics')">إلكترونيات</div>
  <div class="cat" onclick="filter('clothes')">ملابس</div>
  <div class="cat" onclick="filter('home')">منزل</div>
  <div class="cat" onclick="filter('food')">مواد غذائية</div>
</div>

<div class="list" id="list">
  <!-- عناصر ستُعرض بواسطة JS أو يمكنك كتابتها ثابتة -->
</div>

<footer style="text-align:center;padding:12px;background:#0066cc;color:#fff;margin-top:20px">© السوق العالمي</footer>

<script>
  const products = [
    {id:1,title:"هاتف ذكي",cat:"electronics",price:120,img:"https://via.placeholder.com/600x350?text=Phone"},
    {id:2,title:"سماعات بلوتوث",cat:"electronics",price:25,img:"https://via.placeholder.com/600x350?text=Headset"},
    {id:3,title:"قميص رجالي",cat:"clothes",price:15,img:"https://via.placeholder.com/600x350?text=Shirt"},
    {id:4,title:"مخلاة كهربائية",cat:"home",price:40,img:"https://via.placeholder.com/600x350?text=Home"},
  ];

  function render(list){
    const el = document.getElementById("list");
    el.innerHTML = "";
    list.forEach(p=>{
      el.innerHTML += `
        <div class="item">
          <img src="${p.img}" style="width:100%;border-radius:8px" />
          <h3>${p.title}</h3>
          <p>السعر: ${p.price}$</p>
          <a class="btn" href="product-details.html?id=${p.id}">التفاصيل</a>
          <a class="btn" href="#" onclick="mustLoginBuy(event)">شراء</a>
        </div>`;
    });
  }
  function filter(cat){
    if(cat === 'all') render(products);
    else render(products.filter(p=>p.cat===cat));
  }
  function doSearch(){
    const q = document.getElementById("q").value.trim().toLowerCase();
    render(products.filter(p=>p.title.toLowerCase().includes(q)));
  }

  function mustLoginBuy(e){
    e.preventDefault();
    if(!localStorage.getItem("username")){
      alert("يجب تسجيل الدخول لإتمام الشراء.");
      window.location.href="login.html";
      return;
    }
    if(localStorage.getItem("subscribed")!=="true"){
      if(confirm("الاشتراك مطلوب للشراء. انتقل للاشتراك؟")) window.location.href="subscribe.html";
      return;
    }
    alert("أضيف المنتج إلى السلة (اختباري).");
  }

  // initial
  render(products);
</script>
</body>
    </html>
